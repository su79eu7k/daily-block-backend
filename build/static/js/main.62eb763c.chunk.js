(this["webpackJsonpdaily-block"]=this["webpackJsonpdaily-block"]||[]).push([[0],{131:function(e,n){},379:function(e,n){},381:function(e,n){},391:function(e,n){},393:function(e,n){},419:function(e,n){},421:function(e,n){},422:function(e,n){},427:function(e,n){},429:function(e,n){},448:function(e,n){},460:function(e,n){},463:function(e,n){},494:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),a=t(90),o=t.n(a),i=t(14),l=t(49),s=t(15),u=r.a.createContext({token:null,login:function(e){},logout:function(){}}),d=t(1);var b=function(){var e=Object(c.useContext)(u);return Object(d.jsxs)("header",{id:"nav-bar",children:[Object(d.jsx)("div",{id:"logo",children:"Daily Blocks"}),Object(d.jsx)("nav",{id:"nav",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/",children:Object(d.jsx)("button",{children:"Home"})})}),!e.token&&Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/login",children:Object(d.jsx)("button",{children:"Login"})})}),e.token&&Object(d.jsx)("li",{children:Object(d.jsx)("button",{onClick:e.logout,children:"Logout"})})]})})]})},j=t(8),f=t(6),h=t.n(f),p=t(33),m=t(136),O=r.a.createContext({label:"",changeLabel:function(e){}}),x=t(244),v=t.n(x),k=t(30);var g,y=function(e){fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"query {\n    extendToken {\n      token\n    }\n  }"}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+e.token}}).then((function(e){return e.json()})).then((function(n){var t={token:n.data.extendToken.token};e.login.apply(e,Object(k.a)(Object.values(t))),localStorage.setItem("auth",JSON.stringify(t))})).catch((function(e){console.log(e)}))},w=t(9),S=w.b.div(g||(g=Object(j.a)(["\n  font-size: .8rem;\n  text-align: center;\n"])));var C=function(e){var n=Object(c.useState)(!1),t=Object(i.a)(n,2),r=t[0],a=t[1],o=Object(c.useContext)(u),l=Object(c.useRef)(null),s=function(){var n=Object(p.a)(h.a.mark((function n(t,c){var r,i,s,u,d,b,j,f;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),l.current.value!==e.children){n.next=4;break}return e.setEdit(!1),n.abrupt("return");case 4:if(r=l.current.value.split(/^(#\s.+)$/m).slice(1),i=[],s=[],""===r[0]&&(r=r.slice(1)),!/^#\s.+$/m.test(r[0])){n.next=12;break}r.forEach((function(e,n){n%2===0?i.push(e):s.push(e)})),n.next=14;break;case 12:return a(!0),n.abrupt("return");case 14:return n.next=16,e.deleteFamilyBlocks();case 16:for(u=0;u<i.length;u++)d=i[u],b=s[u],j=e.date,f=u,"mutation CreateBlock($label: String!, $content: String!, $date: Float!, $sn: Int!) {\n        createBlock(blockInput: {label: $label, content: $content, date: $date, sn: $sn}) {\n          label\n          content\n          date\n          sn\n        }\n      }",fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"mutation CreateBlock($label: String!, $content: String!, $date: Float!, $sn: Int!) {\n        createBlock(blockInput: {label: $label, content: $content, date: $date, sn: $sn}) {\n          label\n          content\n          date\n          sn\n        }\n      }",variables:{label:d,content:b,date:j,sn:f}}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+o.token}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}));e.setEdit(!1),e.setBlocksUpdated(Date.now()),""===c.label||i.includes(c.label)||c.changeLabel("");case 20:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return Object(d.jsx)(O.Consumer,{children:function(n){return Object(d.jsxs)("div",{className:"card--io--container",children:[Object(d.jsx)("div",{className:"card--io--header",children:"Edit"}),Object(d.jsx)("div",{className:"card--io--body",children:Object(d.jsxs)("form",{onSubmit:function(e){s(e,n)},children:[Object(d.jsxs)("div",{className:"card--io--body--elem",children:[Object(d.jsx)("label",{children:Object(d.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",rel:"noreferrer",children:"Markdown"})}),Object(d.jsx)("textarea",{ref:l,defaultValue:e.children})]}),r&&Object(d.jsx)(S,{children:"\u26a0\ufe0f Cannot recognize label. Please check the format: #\u23b5label\u21b5"}),Object(d.jsxs)("div",{className:"card--io--body--footer",children:[Object(d.jsx)("button",{onClick:function(){return e.setEdit(!1)},children:"Cancel"}),Object(d.jsx)("input",{type:"submit",value:"Submit"})]})]})})]})}})},$=t(37),I=t.n($);function T(e){var n=Object(c.useMemo)((function(){return document.getElementById(e.container)}),[e.container]);return Object(a.createPortal)(e.children,n)}T.propTypes={container:I.a.string,children:I.a.node};var N,A,B,E,L,q,z,F,U,P,D=T,J=Object(w.c)(N||(N=Object(j.a)(["\n  0% {\n    opacity: 0\n  }\n  100% {\n    opacity: 1\n  }\n"]))),G=Object(w.c)(A||(A=Object(j.a)(["\n  0% {\n    opacity: 1\n  }\n  100% {\n    opacity: 0\n  }\n"]))),M=w.b.div(B||(B=Object(j.a)(["\n  box-sizing: border-box;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  overflow: auto;\n  outline: 0;\n  visibility: ",";\n  transition: visibility 1s linear;\n  ",";\n  ",";\n"])),(function(e){return e.visible?"visible":"hidden"}),(function(e){return e.visible&&Object(w.a)(E||(E=Object(j.a)(["animation: "," 1s"])),J)}),(function(e){return!e.visible&&Object(w.a)(L||(L=Object(j.a)(["animation: "," 1s"])),G)})),W=w.b.div(q||(q=Object(j.a)(["\n  box-sizing: border-box;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 999;\n  visibility: ",";\n  transition: visibility 1s linear;\n  ",";\n  ",";\n"])),(function(e){return e.visible?"visible":"hidden"}),(function(e){return e.visible&&Object(w.a)(z||(z=Object(j.a)(["animation: "," 1s"])),J)}),(function(e){return!e.visible&&Object(w.a)(F||(F=Object(j.a)(["animation: "," 1s"])),G)})),H=w.b.div(U||(U=Object(j.a)(["\n  box-sizing: border-box;\n  position: relative;\n  box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.5);\n  background-color: #f2f0ea;\n  border-radius: .3rem;\n  top: 50%;\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 180px;\n  height: 120px;\n  @media (min-width: 600px) {\n    width: 240px;\n    height: 160px;\n    padding: 1.5rem;\n    font-size: 16px;\n  }\n  padding: 1.5rem;\n  font-size: 12px;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n"]))),V=w.b.button(P||(P=Object(j.a)(["\n  height: 2rem;\n  width: 4rem;\n  margin: .3rem;\n  border-width: 0px;\n  border-radius: 1rem;\n  background-color: #857e7a;\n  font-family: inherit;\n  font-size: .7rem;\n  color: #ffffff;\n\n  &:hover {\n    background-color: #443c36;\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])));var R=function(e){return Object(d.jsxs)(D,{container:"modal-root",children:[Object(d.jsx)(W,{visible:e.visible}),Object(d.jsx)(M,{visible:e.visible,children:Object(d.jsxs)(H,{children:[Object(d.jsx)("p",{children:"\ud83d\udea8 Are you sure you want to delete all sibling items?"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(V,{onClick:function(){e.allowScroll(),e.setVisible(!1)},children:"Cancel"}),Object(d.jsx)(V,{onClick:function(){e.allowScroll(),e.deleteFamilyBlocks()},children:"Delete"})]})]})})]})},_=t(18);var Y=function(e){var n=Object(c.useState)(!1),t=Object(i.a)(n,2),r=t[0],a=t[1],o=Object(c.useState)(!1),l=Object(i.a)(o,2),s=l[0],b=l[1],j=Object(c.useState)(null),f=Object(i.a)(j,2),m=f[0],x=f[1],k=Object(c.useContext)(u),g=Object(c.useCallback)((function(e){e.preventDefault()}),[]),w=function(){document.body.style.overflow="auto",document.body.removeEventListener("touchmove",g)},S=function(){var n=Object(p.a)(h.a.mark((function n(){var t,c,r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"\n      query Blocks($familyIndex: [Float!], $label: String) {\n        blocks(familyIndex: $familyIndex, label: $label) {\n          label\n          content\n          date\n        }\n      }",n.next=3,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n      query Blocks($familyIndex: [Float!], $label: String) {\n        blocks(familyIndex: $familyIndex, label: $label) {\n          label\n          content\n          date\n        }\n      }",variables:{familyIndex:[e.date],label:""}}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+k.token}});case 3:return t=n.sent,n.next=6,t.json();case 6:if(!(c=n.sent).errors){n.next=11;break}if(401!==c.errors[0].statusCode){n.next=11;break}return k.logout(),n.abrupt("return");case 11:r=[],c.data.blocks.forEach((function(e){r.push(e.label+e.content)})),x(r.join(""));case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),$=function(){var n=Object(p.a)(h.a.mark((function n(){var t,c,r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={query:"\n        mutation {\n          deleteFamilyBlocks(date: ".concat(e.date,") {\n            deletedCount\n          }\n        }\n      ")},n.next=3,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+k.token}});case 3:return c=n.sent,n.next=6,c.json();case 6:r=n.sent,e.setDeletedCount(r.data.deleteFamilyBlocks.deletedCount);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){document.body.style.overflow="hidden",document.body.addEventListener("touchmove",g,{capture:!1,once:!1,passive:!1}),a(!0)},T=new Date(e.date).toLocaleString("en-US"),N=Object(_.c)(s,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),A=e.date,B=e.setDeletedCount,E=e.setBlocksUpdated;return Object(d.jsx)(O.Consumer,{children:function(n){return Object(d.jsxs)("div",{className:"card--content--container",children:[N.map((function(e){var n=e.item,t=e.key,c=e.props;return n&&Object(d.jsx)(_.a.div,{style:c,children:Object(d.jsx)(C,{date:A,deleteFamilyBlocks:$,setDeletedCount:B,setBlocksUpdated:E,setEdit:b,edit:s,children:m})},t)})),(""!==n.currentLabel||""===n.currentLabel&&0===e.sn)&&Object(d.jsxs)("div",{className:"card--content--info",children:[Object(d.jsx)("div",{className:"timestamp",children:T}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.Consumer,{children:function(e){return Object(d.jsx)("div",{className:"icon-btn",onClick:function(){!function(e){!1===s&&(S(),y(e)),b(!s)}(e)},children:"Edit"})}})}),Object(d.jsx)("li",{children:Object(d.jsx)("div",{className:"icon-btn",onClick:function(){I()},children:"Delete"})}),Object(d.jsx)(R,{visible:r,setVisible:a,deleteFamilyBlocks:$,allowScroll:w})]})]}),n.currentLabel!==e.label?Object(d.jsx)("div",{className:"card--content--label",onClick:function(){n.currentLabel===e.label?n.changeLabel(""):n.changeLabel(e.label)},children:Object(d.jsx)("h1",{children:e.label})}):null,Object(d.jsx)("div",{className:"card--content--content",children:Object(d.jsx)(v.a,{children:e.content})})]})}})};var K=function(e){return Object(d.jsxs)("div",{className:"card--content--container",children:[Object(d.jsxs)("div",{className:"card--content--info",children:[Object(d.jsx)("div",{className:"timestamp",id:"skeleton"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)("div",{className:"icon-btn",id:"skeleton"})}),Object(d.jsx)("li",{children:Object(d.jsx)("div",{className:"icon-btn",id:"skeleton"})})]})]}),""===e.currentLabel?Object(d.jsx)("div",{className:"card--content--label",id:"skeleton",children:Object(d.jsx)("h1",{children:"# "})}):null,Object(d.jsx)("div",{className:"card--content--content",id:"skeleton"})]})};var Q,X=function(e){var n=Object(c.useState)([]),t=Object(i.a)(n,2),r=t[0],a=t[1],o=Object(c.useState)(!1),l=Object(i.a)(o,2),s=l[0],b=l[1],j=Object(c.useState)({currentLabel:"",changeLabel:function(e){v(Object(m.a)(Object(m.a)({},x),{},{currentLabel:e}))}}),f=Object(i.a)(j,2),x=f[0],v=f[1],k=Object(c.useState)(null),g=Object(i.a)(k,2),y=g[0],w=g[1],S=Object(c.useContext)(u),C=function(){var e=Object(p.a)(h.a.mark((function e(){var n,t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query {\n      familyIndex {\n        distinct\n      }\n    }",e.next=3,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"query {\n      familyIndex {\n        distinct\n      }\n    }"}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S.token}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(t=e.sent).errors){e.next=11;break}if(401!==t.errors[0].statusCode){e.next=11;break}return S.logout(),e.abrupt("return");case 11:return e.abrupt("return",t.data.familyIndex.distinct);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(h.a.mark((function e(){var n,t,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),""!==(n=x.currentLabel)){e.next=7;break}return e.next=5,C();case 5:c=e.sent,t=c;case 7:return"\n      query Blocks($familyIndex: [Float!], $label: String) {\n        blocks(familyIndex: $familyIndex, label: $label) {\n          _id\n          label\n          content\n          date\n          sn\n        }\n      }",e.next=10,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n      query Blocks($familyIndex: [Float!], $label: String) {\n        blocks(familyIndex: $familyIndex, label: $label) {\n          _id\n          label\n          content\n          date\n          sn\n        }\n      }",variables:{familyIndex:t,label:n}}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S.token}});case 10:return r=e.sent,e.next=13,r.json();case 13:if(!(o=e.sent).errors){e.next=18;break}if(401!==o.errors[0].statusCode){e.next=18;break}return S.logout(),e.abrupt("return");case 18:a(o.data.blocks),b(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)($,[x.currentLabel,e.blocksUpdated,y]),Object(d.jsx)(O.Provider,{value:x,children:Object(d.jsxs)("div",{className:"card--rolling--container",children:[""!==x.currentLabel?Object(d.jsx)("div",{className:"card--content--container",children:Object(d.jsx)("div",{className:"card--content--label--title",onClick:function(){x.changeLabel("")},children:Object(d.jsx)("h1",{children:x.currentLabel})})}):null,s&&new Array(3).fill(1).map((function(e,n){return Object(d.jsx)(K,{currentLabel:x.currentLabel},n)})),!s&&r.map((function(n){return Object(d.jsx)(Y,{label:n.label,date:n.date,sn:n.sn,content:n.content,setDeletedCount:w,blocksUpdated:e.blocksUpdated,setBlocksUpdated:e.setBlocksUpdated},n._id)}))]})})},Z=w.b.div(Q||(Q=Object(j.a)(["\n  font-size: .8rem;\n  text-align: center;\n"])));var ee,ne=function(e){var n=Object(c.useState)(!1),t=Object(i.a)(n,2),r=t[0],a=t[1],o=Object(c.useContext)(u),l=Object(c.useRef)(null);return Object(d.jsx)("div",{className:"card--io--container",children:Object(d.jsx)("div",{className:"card--io--body",children:Object(d.jsxs)("form",{onSubmit:function(n){n.preventDefault();var t=l.current.value.split(/^(#\s.+)$/m),c=Date.now(),r=[],i=[];""===t[0]&&(t=t.slice(1)),/^#\s.+$/m.test(t[0])?(t.forEach((function(e,n){n%2===0?r.push(e):i.push(e)})),r.forEach((function(e,n){var t=r[n],a=i[n],l=c,s=n;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"mutation CreateBlock($label: String!, $content: String!, $date: Float!, $sn: Int!) {\n            createBlock(blockInput: {label: $label, content: $content, date: $date, sn: $sn}) {\n              label\n              content\n              date\n              sn\n            }\n          }",variables:{label:t,content:a,date:l,sn:s}}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+o.token}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})),e.setWrite(!1),e.setBlocksUpdated(Date.now())):a(!0)},children:[Object(d.jsxs)("div",{className:"card--io--body--elem",children:[Object(d.jsx)("label",{children:Object(d.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",rel:"noreferrer",children:"Markdown"})}),Object(d.jsx)("textarea",{ref:l,defaultValue:e.children})]}),r&&Object(d.jsx)(Z,{children:"\u26a0\ufe0f Cannot recognize label. Please check the format: #\u23b5label\u21b5"}),Object(d.jsxs)("div",{className:"card--io--body--footer",children:[Object(d.jsx)("button",{type:"button",onClick:function(){return e.setWrite(!1)},children:"Cancel"}),Object(d.jsx)("input",{type:"submit",value:"Submit"})]})]})})})},te=w.b.button(ee||(ee=Object(j.a)(["\n  margin-top: 3vh;\n  height: 3rem;\n  width: 240px;\n  padding: 0px;\n  border-width: 0px;\n  border-radius: .3rem;\n  background-color: ",";\n  font-family: inherit;\n  font-size: 1rem;\n  color: #ffffff;\n\n  &:hover {\n    cursor: pointer;\n    background-color: #857e7a;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  @media (min-width: 600px) {\n    width: 480px;\n  }\n\n  @media (min-width: 900px) {\n    width: 720px;\n  }\n"])),(function(e){return e.write?"#857e7a":"#443c36"}));var ce,re,ae,oe,ie,le,se=function(){var e=Object(c.useState)(!1),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(Date.now()),o=Object(i.a)(a,2),l=o[0],s=o[1],b=Object(_.c)(t,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return Object(d.jsx)(u.Consumer,{children:function(e){return Object(d.jsxs)("div",{className:"card--contents--container",children:[Object(d.jsx)(te,{write:t,type:"button",onClick:function(){return function(e){r(!0),t||y(e)}(e)},children:"New \u270f\ufe0f"}),b.map((function(e){var n=e.item,t=e.key,c=e.props;return n&&Object(d.jsx)(_.a.div,{style:c,children:Object(d.jsx)(ne,{setWrite:r,setBlocksUpdated:s})},t)})),Object(d.jsx)(X,{blocksUpdated:l,setBlocksUpdated:s})]})}})},ue=Object(w.b)(_.a.button)(ce||(ce=Object(j.a)(["\n  margin-top: 3vh;\n  height: 3rem;\n  width: 240px;\n  padding: 0px;\n  border-width: 0px;\n  border-radius: .3rem;\n  background-color: ",";\n  font-family: inherit;\n  font-size: 1rem;\n  color: #ffffff;\n\n  &:hover {\n    cursor: pointer;\n    background-color: #857e7a;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  @media (min-width: 600px) {\n    width: 480px;\n  }\n\n  @media (min-width: 900px) {\n    width: 720px;\n  }\n"])),(function(e){return e.write?"#857e7a":"#443c36"})),de=w.b.div(re||(re=Object(j.a)(["\n  font-size: 2rem;\n  text-align: center;\n"]))),be=Object(w.b)(_.a.div)(ae||(ae=Object(j.a)(["\n  margin: 3rem 0rem 1.5rem 0rem;\n  padding: 3rem 0rem 1.5rem 0rem;\n"]))),je=Object(w.b)(_.a.div)(oe||(oe=Object(j.a)(["\n  margin: 1.5rem 0rem 3rem 0rem;\n  padding: 1.5rem 0rem 3rem 0rem;\n"]))),fe=Object(w.b)(_.a.div)(ie||(ie=Object(j.a)(["\n  height: auto;\n"]))),he=Object(w.b)(_.a.div)(le||(le=Object(j.a)(["\n  height: auto;\n  font-size: ",";\n  color: ",";\n"])),(function(e){return"d"===e.id.charAt(0)?"1.3rem":"1.5rem"}),(function(e){return"d"===e.id.charAt(0)?"#857e7a":"#443c36"}));function pe(){var e=Object(c.useRef)([]),n=Object(c.useRef)([]),t=Object(c.useState)([]),r=Object(i.a)(t,2),a=r[0],o=r[1],s=Object(c.useState)([]),u=Object(i.a)(s,2),b=u[0],j=u[1],f=Object(c.useState)(!1),h=Object(i.a)(f,2),p=h[0],m=h[1],O=Object(_.c)(a,(function(e){return e.k}),{config:{mass:1,tension:210,friction:20},from:{opacity:0,maxHeight:"0rem",color:"#443c36"},enter:[{opacity:1,maxHeight:"3rem",color:"#443c36"},{color:"#857e7a"}],leave:{opacity:0,maxHeight:"0rem",color:"#443c36"},update:{}}),x=Object(_.c)(b,(function(e){return e.k}),{config:{mass:1,tension:210,friction:20},from:{opacity:0,maxHeight:"0rem"},enter:{opacity:1,maxHeight:"2.4rem"},leave:{opacity:0,maxHeight:"0rem"},update:{}}),v=Object(_.b)({opacity:p?1:0}),k=Object(c.useCallback)((function(){e.current.map(clearTimeout),e.current=[],o([]),e.current.push(setTimeout((function(){return o({k:"m0",v:"LIFE\ud83e\udd17\ud83c\udf7a"})}),1e3)),e.current.push(setTimeout((function(){return o([{k:"m0",v:"LIFE\ud83e\udd17\ud83c\udf7a"},{k:"m1",v:"IDEA\ud83d\udca1\u2728"}])}),3e3)),e.current.push(setTimeout((function(){return o([{k:"m0",v:"LIFE\ud83e\udd17\ud83c\udf7a"},{k:"m1",v:"IDEA\ud83d\udca1\u2728"},{k:"m2",v:"Anything to log\ud83d\udcc8\ud83d\udcb8"}])}),5e3)),e.current.push(setTimeout((function(){return o([{k:"m3",v:"Write it down\u270f\ufe0f\ud83d\udcd2"}])}),7e3)),e.current.push(setTimeout((function(){return o([{k:"m4",v:"And track them well\ud83d\udd0e\ud83c\udff7\ufe0f"}])}),14e3))}),[]);Object(c.useEffect)((function(){return k(),function(){o([]),j([])}}),[]);var g=Object(c.useCallback)((function(){n.current.map(clearTimeout),n.current=[],j([]),n.current.push(setTimeout((function(){return j([{k:"d0",v:"Mon."},{k:"e0",v:"# IDEA"},{k:"e1",v:"# AAPL\ud83d\udcc8"},{k:"e2",v:"# EATING\ud83c\udf7d\ufe0f"}])}),7e3)),n.current.push(setTimeout((function(){return j([{k:"d1",v:"Tue."},{k:"e3",v:"# EATING\ud83c\udf7d\ufe0f"},{k:"e4",v:"# MSFT"},{k:"e5",v:"# LOVE\u2764\ufe0f"}])}),9e3)),n.current.push(setTimeout((function(){return j([{k:"d2",v:"Wed."},{k:"e6",v:"# AAPL\ud83d\udcc8"},{k:"e7",v:"# LOVE\u2764\ufe0f"},{k:"e8",v:"# EATING\ud83c\udf7d\ufe0f"}])}),11e3)),n.current.push(setTimeout((function(){return j([{k:"l0",v:"# EATING\ud83c\udf7d\ufe0f"},{k:"d0",v:"Wed."},{k:"d1",v:"Tue."},{k:"d2",v:"Mon."}])}),14e3)),n.current.push(setTimeout((function(){return j([{k:"l1",v:"# AAPL\ud83d\udcc8"},{k:"d3",v:"Wed."},{k:"d4",v:"Mon."}])}),16e3)),n.current.push(setTimeout((function(){return j([{k:"l2",v:"# LOVE\u2764\ufe0f"},{k:"d5",v:"Wed."},{k:"d6",v:"Tue."}])}),18e3))}),[]);return Object(c.useEffect)((function(){return g()}),[]),Object(c.useEffect)((function(){setTimeout((function(){m(!0)}),2e4)}),[]),Object(d.jsxs)(de,{children:[Object(d.jsx)(be,{children:O.map((function(e){var n=e.item,t=e.key,c=e.props;return Object(d.jsx)(fe,{id:n.k,style:c,children:n.v},t)}))}),Object(d.jsx)(je,{children:x.map((function(e){var n=e.item,t=e.key,c=e.props;return Object(d.jsx)(he,{id:n.k,style:c,children:n.v},t)}))}),Object(d.jsx)(l.b,{to:"/login",children:Object(d.jsx)(ue,{style:v,children:"Start \ud83d\udd0c"})})]})}var me=function(){var e=Object(c.useContext)(u);return Object(d.jsxs)(r.a.Fragment,{children:[!e.token&&Object(d.jsx)(pe,{}),e.token&&Object(d.jsx)(se,{})]})},Oe=t(248),xe=t.n(Oe),ve=t(337).OAuth2Client,ke="39791115826-6tis5pko251mrppnkuugsvkprpn6jqo6.apps.googleusercontent.com",ge=new ve(ke);var ye,we,Se,Ce,$e,Ie=function(){var e=function(){var e=Object(p.a)(h.a.mark((function e(n,t){var c,r,a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.verifyIdToken({idToken:n.tokenId,audience:ke});case 2:c=e.sent,r=c.getPayload(),a=r.name,o=r.email,i=r.picture,"mutation AuthUserGoogle($name: String!, $email: String!, $picture: String!) {\n      authUserGoogle(authUserGoogleInput: {name: $name, email: $email, picture: $picture}) {\n        token\n        userId\n        tokenExpiration\n      }\n    }",fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"mutation AuthUserGoogle($name: String!, $email: String!, $picture: String!) {\n      authUserGoogle(authUserGoogleInput: {name: $name, email: $email, picture: $picture}) {\n        token\n        userId\n        tokenExpiration\n      }\n    }",variables:{name:a,email:o,picture:i}}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var n={token:e.data.authUserGoogle.token};t.login.apply(t,Object(k.a)(Object.values(n))),localStorage.setItem("auth",JSON.stringify(n))})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return Object(d.jsx)(u.Consumer,{children:function(n){return Object(d.jsx)(xe.a,{clientId:ke,buttonText:"Sign in with Google",onSuccess:function(t){e(t,n)},onFailure:e})}})},Te=Object(w.b)(_.a.div)(ye||(ye=Object(j.a)(["\n  margin: 3rem auto;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n"]))),Ne=w.b.div(we||(we=Object(j.a)(["\n  margin: 1rem auto;\n"]))),Ae=w.b.div(Se||(Se=Object(j.a)(["\n  min-width: 240px;\n  width: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n"]))),Be=w.b.div(Ce||(Ce=Object(j.a)(["\n  margin: 1rem auto;\n\n  & label {\n    min-width: 240px;\n    font-size: .7rem;\n    display: block;\n  }\n\n  & input {\n    min-width: 240px;\n    border-radius: .3rem;\n    border-width: 0px;\n    border-color: #857e7a;\n    padding:.7rem;\n    background-color:white;\n\n    &:focus {\n      outline: none;\n    }\n  }\n"]))),Ee=w.b.div($e||($e=Object(j.a)(["\n  margin: 2rem auto;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n\n  & input, button {\n    height: 2rem;\n    width: 4rem;\n    margin: .3rem;\n    border-width: 0px;\n    border-radius: 1rem;\n    background-color: #857e7a;\n    font-family: inherit;\n    font-size: .7rem;\n    color: #ffffff;\n\n    &:hover {\n      background-color: #443c36;\n      cursor: pointer;\n    }\n\n    &:focus {\n      outline: none;\n    }\n  }\n"])));var Le=function(){var e=Object(c.useState)(!1),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useRef)(null),o=Object(c.useRef)(null),l=Object(_.b)({opacity:1,from:{opacity:0}});return Object(d.jsx)(u.Consumer,{children:function(e){return Object(d.jsxs)(Te,{style:l,children:[Object(d.jsx)(Ne,{children:t?"Sign Up":"Sign In"}),Object(d.jsx)(Ae,{children:Object(d.jsxs)("form",{onSubmit:function(n){!function(e,n){e.preventDefault();var c,r=a.current.value,i=o.current.value;c=t?{query:'\n          mutation {\n            createUser(userInput: {email: "'.concat(r,'", password: "').concat(i,'"}) {\n              _id\n              email\n            }\n          }\n        ')}:{query:'\n          query {\n            login(email: "'.concat(r,'", password: "').concat(i,'") {\n              token\n            }\n          }\n        ')},fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){if(t)console.log(e.email);else{var c={token:e.data.login.token};n.login.apply(n,Object(k.a)(Object.values(c))),localStorage.setItem("auth",JSON.stringify(c))}})).catch((function(e){console.log(e)}))}(n,e)},children:[Object(d.jsxs)(Be,{children:[Object(d.jsx)("label",{children:"E-Mail"}),Object(d.jsx)("input",{type:"email",ref:a})]}),Object(d.jsxs)(Be,{children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",ref:o})]}),Object(d.jsxs)(Ee,{children:[Object(d.jsx)("input",{type:"submit",value:"Submit"}),t&&Object(d.jsx)("button",{type:"button",onClick:function(){return r(!1)},children:"Sign In"}),!t&&Object(d.jsx)("button",{type:"button",onClick:function(){return r(!0)},children:"Sign Up"})]})]})}),Object(d.jsx)(Ie,{})]})}})};var qe=function(){var e=Object(c.useState)({token:null}),n=Object(i.a)(e,2),t=n[0],r=n[1];return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("auth"));e&&r(e)}),[]),Object(d.jsx)(l.a,{children:Object(d.jsxs)(u.Provider,{value:{token:t.token,login:function(e){r({token:e})},logout:function(){r({token:null}),localStorage.removeItem("auth")}},children:[Object(d.jsx)(b,{}),Object(d.jsx)("main",{children:Object(d.jsxs)(s.d,{children:[Object(d.jsx)(s.a,{from:"/",to:"/home",exact:!0}),!t.token&&Object(d.jsx)(s.b,{path:"/login",children:Object(d.jsx)(Le,{})}),t.token&&Object(d.jsx)(s.a,{from:"/login",to:"/home"}),Object(d.jsx)(s.b,{path:"/home",children:Object(d.jsx)(me,{})})]})})]})})},ze=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,495)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(qe,{})}),document.getElementById("root")),ze()}},[[494,1,2]]]);
//# sourceMappingURL=main.62eb763c.chunk.js.map